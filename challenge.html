<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>

    function fetchData(url) {
      const response = fetch(url)
        .then(response => {
          if (response.ok) {
            //console.log(response.json())
            return response.json().then(data => {
              if (data.info.next) {
                return fetchData(data.info.next).then(next => [...data.results, ...next])
              } else {
                return data.results
              }
              //return data
            })
          } else {
            console.log('not ok')
          }

        })
        .catch(error => console.log(error))
      return response

    }



    const t0 = performance.now()
    fetchData('https://rickandmortyapi.com/api/character')
      .then(res => {
        console.log(res)
        const t1 = performance.now()
        console.log(t1 - t0)
      })


  </script>
</body>

</html>